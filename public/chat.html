<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Real-time Chat</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script defer src="main.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="chat-header">
        <h2>Real-time Chat</h2>
      </div>

      <div class="connection-info">
        <div class="user-input">
          <label for="userId">User ID:</label>
          <input type="text" id="userId" placeholder="Enter your User ID" />
          <button id="connectButton">Connect</button>
        </div>
        <p id="connectionStatus" class="status">Status: Not Connected</p>
      </div>

      <div class="app-container" style="display: none">
        <div class="presence-panel">
          <div class="presence-header">
            <h3>Online Users</h3>
            <div class="status-selector">
              <select id="statusSelector">
                <option value="online">Online</option>
                <option value="away">Away</option>
                <option value="busy">Busy</option>
              </select>
            </div>
          </div>
          <div id="customStatusContainer">
            <input
              type="text"
              id="customStatus"
              placeholder="Set custom status..."
              maxlength="30"
            />
            <button id="updateStatusButton">Update</button>
          </div>
          <div id="onlineUsersList" class="online-users"></div>
        </div>

        <div class="chat-panel">
          <div id="roomSection" class="room-controls">
            <div class="user-input">
              <label for="roomName">Room:</label>
              <input type="text" id="roomName" placeholder="Enter room name" />
              <button id="joinRoomButton">Join Room</button>
            </div>
            <p id="currentRoomStatus" class="status">Not in any room.</p>

            <div id="whisperControls" style="display: none">
              <input type="checkbox" id="whisperModeCheckbox" />
              <label for="whisperModeCheckbox"
                >Send as Whisper (fades away)</label
              >
            </div>
          </div>

          <div class="chat-content">
            <div id="messages">
              <p class="status">Messages will appear here...</p>
            </div>

            <p id="typingIndicator" class="typing-indicator"></p>

            <div id="messageInputContainer" style="display: none">
              <input
                type="text"
                id="messageInput"
                placeholder="Type your message..."
              />
              <button id="sendMessageButton">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="emojiModal" class="modal">
      <div class="modal-content">
        <h3>React with Emoji</h3>
        <div id="emojiList">
          <button class="emoji-button" data-emoji="👍">👍</button>
          <button class="emoji-button" data-emoji="❤️">❤️</button>
          <button class="emoji-button" data-emoji="😂">😂</button>
          <button class="emoji-button" data-emoji="😮">😮</button>
          <button class="emoji-button" data-emoji="😢">😢</button>
          <button class="emoji-button" data-emoji="🔥">🔥</button>
          <button class="emoji-button" data-emoji="👏">👏</button>
          <button class="emoji-button" data-emoji="🎉">🎉</button>
        </div>
        <button id="closeEmojiModal">Cancel</button>
      </div>
    </div>

    <div id="userProfileModal" class="modal">
      <div class="modal-content user-profile-modal">
        <h3>User Profile</h3>
        <div id="userProfileContent">
          <div class="profile-header">
            <div class="profile-avatar">
              <span id="profileInitials">?</span>
            </div>
            <div class="profile-info">
              <h4 id="profileName">Loading...</h4>
              <p id="profileStatus" class="status-indicator">
                Loading status...
              </p>
              <p id="profileActivity" class="activity-info">
                Last activity: Unknown
              </p>
            </div>
          </div>
          <div class="profile-actions">
            <button id="sendDirectMessageBtn">Message</button>
            <button id="closeProfileModal">Close</button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
